---
sort: 2
---

# HFT引擎

HFT引擎，也叫高频策略引擎，主要针对高频或者低延时策略，事件驱动，系统延迟在1-2微秒之间

## 事件

HFT引擎中的事件大多与CTA引擎中一致，这里仅介绍HFT特有的事件

### on_order_detail

逐笔委托数据进来时调用

|传入参数    |含义       | 类型     |
|:---------:|:---------:|:---------:|
| context      | 策略运行上下文 |   Context |
| stdCode      | 合约代码 | str(合约str) |
| newOrdQue      | 最新逐笔委托 | dict(逐笔委托结构) |

### on_order_queue

委托队列数据进来时调用

|传入参数    |含义       | 类型     |
|:---------:|:---------:|:---------:|
| context      | 策略运行上下文 |   Context |
| stdCode      | 合约代码 | str(合约str) |
| newOrdQue      | 最新委托队列 | dict(委托队列结构) |

### on_transaction

逐笔成交数据进来时调用

|传入参数    |含义       | 类型     |
|:---------:|:---------:|:---------:|
| context      | 策略运行上下文 |   Context |
| stdCode      | 合约代码 | str(合约str) |
| newTrans      | 最新逐笔成交 | dict(逐笔成交结构) |

### on_channel_ready

交易通道就绪通知

|传入参数    |含义       | 类型     |
|:---------:|:---------:|:---------:|
| context      | 策略运行上下文 |   Context |

### on_channel_lost

交易通道丢失通知

|传入参数    |含义       | 类型     |
|:---------:|:---------:|:---------:|
| context      | 策略运行上下文 |   Context |

### on_entrust

下单结果回报

|传入参数    |含义       | 类型     |
|:---------:|:---------:|:---------:|
| context      | 策略运行上下文 |   Context |
| localid      | 本地订单id | int |
| stdCode      | 合约代码 | str(合约str) |
| bSucc      | 下单结果 | bool |
| mes      | 下单结果描述 | str(不超过32个) |

### on_order

订单回报

|传入参数    |含义       | 类型     |
|:---------:|:---------:|:---------:|
| context      | 策略运行上下文 |   Context |
| localid      | 本地订单id | int |
| stdCode      | 合约代码 | str(合约str) |
| isBuy      | 是否买入 | bool |
| totalQty      | 下单数量 | float |
| leftQty      | 剩余数量 | float |
| price      | 下单价格 | float |
| isCanceled      | 是否已撤单 | bool |

### on_trade

成交回报

|传入参数    |含义       | 类型     |
|:---------:|:---------:|:---------:|
| context      | 策略运行上下文 |   Context |
| stdCode      | 合约代码 | str(合约str) |
| isBuy      | 是否买入 | bool |
| qty      | 下单数量 | float |
| leftQty      | 成交数量 | float |
| price      | 成交价格 | float |

### on_position

初始持仓回报，实盘可用, 回测的时候初始仓位都是空, 所以不需要，在实盘中，该回调函数也仅在策略启动时执行**一次**，如果需要本地记录持仓时，可以配合该函数初始化本地持仓池

|传入参数    |含义       | 类型     |
|:---------:|:---------:|:---------:|
| context      | 策略运行上下文 |   Context |
| stdCode      | 合约代码 | str(合约str) |
| isLong      | 是否为多 | bool |
| prevol      | 昨仓 | float |
| preavail      | 可用昨仓 | float |
| newvol      | 今仓 | float |
| newavail      | 可用今仓 | float |