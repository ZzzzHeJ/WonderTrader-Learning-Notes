---
sort: 1
---

# 1.需求分析

在学习WonderTrader前，我们要先思考量化对交易系统有哪些需求，WT面对的情景有哪些。明白了这些，后面的学习才能有目的，达到事半功倍的效果。

## 信号与交易

首先，一个完整的量化策略可以分为两个部分，一部分是**信号**，另一部分是**交易**。

信号由策略计算产生，再由系统执行交易。以一个简单的双均线策略为例，策略通过不停的计算均线值，并判断长均线和短均线的相对位置来生成交易信号，这一部分就是策略的信号部分。当信号出现时，策略发出交易指令，进行下单，这是交易部分。但实际情况中，信号的生成往往较简单，但交易的执行却复杂的多。因为交易不仅包括下单，还包括如何下单，比如股票中的T+1限制，期货里面的今昨仓；订单的管理，超时未成交是否撤单，撤单后是否追单等等；一个账户下的多个策略对同一个合约下单，如何避免自成交。这些问题都会导致策略中交易部分的代码量迅速膨胀爆炸。

## 策略组

作为个人投资者，往往仅管理一个账户，三个左右的策略，管理的压力较少。但对于机构投资者，需要同时管理多个产品，每个产品可能包含几十个策略，而且多个策略可能还在同一个账户，甚至同一个合约上运行。这就会造成特别大策略管理压力，要求每个策略不仅能够单独记账，不影响同账户下的其他策略，而且要求还需要一个强大的控制台模块，来管理策略的组合。

## 风控管理

回测时由于数据的供应稳定，且没有监管，几乎算是策略运行的最理想情况。而在实际的实盘中，由于策略bug、与柜台通讯异常、数据错误等各种原因，可能导致出现实盘未能考虑的情况：比如一瞬间发出大量订单，同时发出反向的订单，频繁的挂撤订单等，轻则保证金迅速枯竭，重则账户直接被拉进小黑屋。

尽管大部分的研究人员能够在自己的策略中考虑并避免这些问题，但只要有一次疏忽便会造成巨大的损失，因此，需要有一个脱离于策略之外的、高效的、准确的风控管理系统，能够统一对所有策略进行风控管理。

## 研究实盘一致

这里的一致并不是指绩效一致（这几乎无法达成），而是指回测和实盘的代码一致，可以保证策略可以无缝在回测环境和实盘环境之间切换。这几乎已经成为了所有量化交易系统的基本要求。
